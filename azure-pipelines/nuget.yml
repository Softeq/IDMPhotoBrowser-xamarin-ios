trigger: none
pr: none

variables:
  DOTNET_VERSION: 6.0.300
  MACOS_VM_IMAGE: 'macos-12'

jobs:
- job: macOS
  pool:
    vmImage: $(MACOS_VM_IMAGE)
  steps:
    - task: UseDotNet@2
      displayName: .NET Version
      inputs:
        packageType: 'sdk'
        version: '$(DOTNET_VERSION)'

    - task: Bash@3
      displayName: Install .NET Workloads
      inputs:
        targetType: 'inline'
        script: |
          dotnet workload install ios

    - task: Bash@3
      displayName: Pack Library
      inputs:
        targetType: 'inline'
        script: |
          cd src && dotnet pack -c Release -o .

    - task: CopyFiles@2
      inputs:
        contents: '$(packageName)*.nupkg'
        targetFolder: $(Build.ArtifactStagingDirectory)

    - task: PublishBuildArtifacts@1
      inputs:
        ArtifactName: 'drop'
